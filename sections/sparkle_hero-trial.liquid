{%- assign product = all_products[section.settings.product] -%}

<div class="sparkle-hero__wrapper" style="background-image: url({{ section.settings.background_image | img_url: "master" }});">
  <div class="sparkle-hero__container">
    <h1 class="sparkle-hero__heading">{{ section.settings.heading }}</h1>
    <div class="sparkle-hero__subheading">{{ section.settings.subheading }}</div>

    <p class="sparkle-hero__text">{{ section.settings.text | newline_to_br }}</p>

    <form action="/cart/add" data-productid="{{ product.id }}" method="post">
      {%- if product.available -%}{% include "subscription-product" %}{%- endif -%}
      <input type="hidden" name="id" value="{{ product.variants.first.id }}" data-productid="{{ product.id }}" />
      <input type="hidden" name="quantity" value="1" />

      <div class="button__wrapper">
        <button class="sparkle-hero__button button" type="submit">
          {{ section.settings.button_text }}
        </button>
      </div>
    </form>
  </div>
</div>

{% schema %}
{
  "class": "sparkle-hero",
  "name": "Sparkle: Hero",
  "tag": "section",

  "settings": [
    {
      "id": "product",
      "type": "product",
      "label": "Product"
    },

    {
      "id": "background_image",
      "type": "image_picker",
      "label": "Background Image"
    },

    {
      "id": "heading",
      "type": "text",
      "label": "Heading"
    },

    {
      "id": "subheading",
      "type": "text",
      "label": "Subheading"
    },

    {
      "id": "text",
      "type": "textarea",
      "label": "Text"
    },

    {
      "id": "button_text",
      "type": "text",
      "label": "Button Text"
    },

    {
      "id": "button_url",
      "type": "url",
      "label": "Button URL"
    }
  ],

  "presets": [
    {
      "category": "Modules",
      "name": "Sparkle: Hero"
    }
  ]
}
{% endschema %}
